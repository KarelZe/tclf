
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="tclf, a scikit-learn-compatible implementation of popular trade classification algorithms to classify financial markets transactions into buyer- and seller-initiated trades.">
      
      
      
        <link rel="canonical" href="https://karelze.github.io/tclf/rules/">
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-8.5.10">
    
    
      
        <title>Rules - tclf</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#a-primer-on-trade-classification-rules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="tclf" class="md-header__button md-logo" aria-label="tclf" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            tclf
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rules
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/karelze/tclf" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    karelze/tclf
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Rules
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../reference/" class="md-tabs__link">
      API reference
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../option_trade_classification/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../naming_conventions/" class="md-tabs__link">
        More
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="tclf" class="md-nav__button md-logo" aria-label="tclf" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    tclf
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/karelze/tclf" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    karelze/tclf
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Rules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Rules
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-rules" class="md-nav__link">
    Basic Rules
  </a>
  
    <nav class="md-nav" aria-label="Basic Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quote-rule" class="md-nav__link">
    Quote Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tick-test" class="md-nav__link">
    Tick Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reverse-tick-test" class="md-nav__link">
    Reverse Tick Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depth-rule" class="md-nav__link">
    Depth Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trade-size-rule" class="md-nav__link">
    Trade Size Rule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hybrid-rules" class="md-nav__link">
    Hybrid Rules
  </a>
  
    <nav class="md-nav" aria-label="Hybrid Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lee-and-ready-algorithm" class="md-nav__link">
    Lee and Ready Algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ellis-michaely-ohara-rule" class="md-nav__link">
    Ellis-Michaely-O'Hara Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chakrabarty-li-nguyen-van-ness-method" class="md-nav__link">
    Chakrabarty-Li-Nguyen-Van-Ness Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stacked-rule" class="md-nav__link">
    Stacked Rule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#footnotes" class="md-nav__link">
    Footnotes
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        API reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../option_trade_classification/" class="md-nav__link">
        Option trade classification
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          More
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../naming_conventions/" class="md-nav__link">
        Naming conventions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nan_handling/" class="md-nav__link">
        Handling of NaNs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#notation" class="md-nav__link">
    Notation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-rules" class="md-nav__link">
    Basic Rules
  </a>
  
    <nav class="md-nav" aria-label="Basic Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quote-rule" class="md-nav__link">
    Quote Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tick-test" class="md-nav__link">
    Tick Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reverse-tick-test" class="md-nav__link">
    Reverse Tick Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depth-rule" class="md-nav__link">
    Depth Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trade-size-rule" class="md-nav__link">
    Trade Size Rule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hybrid-rules" class="md-nav__link">
    Hybrid Rules
  </a>
  
    <nav class="md-nav" aria-label="Hybrid Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lee-and-ready-algorithm" class="md-nav__link">
    Lee and Ready Algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ellis-michaely-ohara-rule" class="md-nav__link">
    Ellis-Michaely-O'Hara Rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chakrabarty-li-nguyen-van-ness-method" class="md-nav__link">
    Chakrabarty-Li-Nguyen-Van-Ness Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stacked-rule" class="md-nav__link">
    Stacked Rule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#footnotes" class="md-nav__link">
    Footnotes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/karelze/tclf/edit/main/docs/rules.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="a-primer-on-trade-classification-rules">A Primer on Trade Classification Rules<a class="headerlink" href="#a-primer-on-trade-classification-rules" title="Permanent link">&para;</a></h1>
<p>The goal of trade classification algorithms is to identify the <em>initiator of a trade</em>. While definitions for the trade initiator differ in literature (cp. Lee &amp; Radhakrishna, 2000, pp. 94--97; Odders-White, 2000, p. 262)<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup><sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> the trade initiator is binary and either the buyer or the seller.</p>
<p>As the trade initiator is frequently absent in datasets, it must be inferred using trade classification algorithms or other approaches. This article introduces basic rules for trade classification.</p>
<h2 id="notation">Notation<a class="headerlink" href="#notation" title="Permanent link">&para;</a></h2>
<p>We denote the predicted class by <span class="arithmatex">\(y \in \mathcal{Y}\)</span> with <span class="arithmatex">\(\mathcal{Y}=\{-1,1\}\)</span>, whereby <span class="arithmatex">\(y=-1\)</span> is indicating a seller-initiated and <span class="arithmatex">\(y=1\)</span> a buyer-initiated trade. We denote the sequence of trade prices of the <span class="arithmatex">\(i\)</span>-th security by <span class="arithmatex">\((P_{i,t})_{t=1}^{T}\)</span> and the corresponding ask at <span class="arithmatex">\(t\)</span> by <span class="arithmatex">\(A_{i,t}\)</span> and bid by <span class="arithmatex">\(B_{i,t}\)</span>. The midpoint of the bid-ask spread is denoted by <span class="arithmatex">\(M_{i,t} = \tfrac{1}{2}(B_{i,t} + A_{i,t})\)</span>. Moreover, we denote the quoted size at the ask with <span class="arithmatex">\(\tilde{A}_{i,t}\)</span>, <span class="arithmatex">\(\tilde{B}_{i,t}\)</span> of the bid, and <span class="arithmatex">\(P_{i,t}\)</span> the trade price at <span class="arithmatex">\(t\)</span> of the <span class="arithmatex">\(i\)</span>-th security.</p>
<p>For simplicity we assume an ideal data regime, where quote data is complete and spreads are positive.🥵 </p>
<h2 id="basic-rules">Basic Rules<a class="headerlink" href="#basic-rules" title="Permanent link">&para;</a></h2>
<p>This section presents basic classification rules, that may be used for trade classification independently or integrated into a <a href="#hybrid-rules">hybrid algorithm</a>.</p>
<h3 id="quote-rule">Quote Rule<a class="headerlink" href="#quote-rule" title="Permanent link">&para;</a></h3>
<p>The quote rule classifies a trade by comparing the trade price against the corresponding quotes at the time of the trade. If the trade price is above the midpoint of the bid-ask spread, <span class="arithmatex">\(M_{i,t}\)</span>, the trade is classified as a buy and if it is below the midpoint, as a sell (Harris, 1989, p. 41)<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>. </p>
<p>Thus, the classification rule on <span class="arithmatex">\(\mathcal{A} = \left\{(i, t) \in \mathbb{N}^2: P_{i,t} \neq M_{i,t}\right\}\)</span> is given by:</p>
<div class="arithmatex">\[
    \operatorname{quote}\colon \mathcal{A} \to \mathcal{Y},\quad
    \operatorname{quote}(i, t)=
    \begin{cases}
        1,  &amp; \mathrm{if}\ P_{i, t}&gt;M_{i, t}  \\
        -1, &amp; \mathrm{if}\ P_{i, t}&lt;M_{i, t}. \\
    \end{cases}
\]</div>
<p>The quote rule cannot classify trades at the midpoint of the quoted spread. A solution to overcome this limitation is to couple the quote rule with other approaches, as done in <a href="#hybrid-rules">hybrid rules</a>.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;quote&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="tick-test">Tick Test<a class="headerlink" href="#tick-test" title="Permanent link">&para;</a></h3>
<p>A common alternative to the quote rule is the tick test. Based on the rationale that buys increase trade prices and sells lower them, the tick test classifies trades by the change in trade price. It was first applied in (Hasbrouck, 1988, p. 240; Holthausen, Leftwich, &amp; Mayers, 1987, p. 244)<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup><sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>. </p>
<p>The tick test is defined as:</p>
<div class="arithmatex">\[
    \operatorname{tick}\colon \mathbb{N}^2 \to \mathcal{Y},\quad
    \operatorname{tick}(i, t)=
    \begin{cases}
        1,                           &amp; \mathrm{if}\ P_{i, t}&gt;P_{i, t-1} \\
        -1,                          &amp; \mathrm{if}\ P_{i, t} &lt; P_{i, t-1}  \\
        Y\sim\mathrm{Uniform}(\mathcal{Y}), &amp; \mathrm{if}\ t=1 \\
        \operatorname{tick}(i, t-1), &amp; \mathrm{else}.
    \end{cases}
\]</div>
<p>Considering the cases the trade price is higher than the previous price (uptick) the trade is classified as a buy. Reversely, if it is below the previous price (downtick), the trade is classified as a sell. If the price change is zero (zero tick), the signing uses the last price different from the current price (Lee &amp; Ready, 1991, p. 735)<sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup>. To end recursion at <span class="arithmatex">\(t=1\)</span>, we sign the trades randomly as buyer- or seller-initiated to simplify notation 🤓.</p>
<p>The tick rule can sign all trades as long as a last differing trade price exists, but the overall precision can be impacted by infrequent trading.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)],</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="reverse-tick-test">Reverse Tick Test<a class="headerlink" href="#reverse-tick-test" title="Permanent link">&para;</a></h3>
<p>The reverse tick test is a variant of the tick test proposed in (Hasbrouck, 1988, p. 241)<sup id="fnref2:5"><a class="footnote-ref" href="#fn:5">5</a></sup>. It is similar to the tick rule but classifies based on the next, distinguishable trade price.</p>
<div class="arithmatex">\[
    \operatorname{rtick} \colon \mathbb{N}^2 \to \mathcal{Y},\quad
    \operatorname{rtick}(i, t)=
    \begin{cases}
        1,                            &amp; \mathrm{if}\ P_{i, t} &gt; P_{i, t+1} \\
        -1,                           &amp; \mathrm{if}\ P_{i, t} &lt; P_{i, t+1}            \\
        Y\sim\mathrm{Uniform}(\mathcal{Y}), &amp; \mathrm{if}\ t+1=T \\
        \operatorname{rtick}(i, t+1), &amp; \mathrm{else}
    \end{cases}
\]</div>
<p>As denoted in the equation, the trade is classified as seller-initiated, if the next trade is on an uptick or a zero uptick, and classified as buyer-initiated for trades at a downtick or a zero downtick (Lee &amp; Ready, 1991, pp. 735--736)<sup id="fnref2:6"><a class="footnote-ref" href="#fn:6">6</a></sup>.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;rev_tick&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)],</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="depth-rule">Depth Rule<a class="headerlink" href="#depth-rule" title="Permanent link">&para;</a></h3>
<p>The depth rule gauges the trade initiator from the quoted size at the best bid and ask. Based on the observation that an exceeding bid or ask size relates to higher liquidity at one trade side, trades are classified as a buy (sell) for a larger ask (bid) size (Grauer, Schuster, &amp; Uhrig-Homburg, 2023, pp. 14--15)<sup id="fnref:7"><a class="footnote-ref" href="#fn:7">7</a></sup>.
We set the domain as <span class="arithmatex">\(\mathcal{A} = \left\{(i, t) \in \mathbb{N}^2: P_{i,t} = M_{i,t} \land \tilde{A}_{i,t} \neq \tilde{B}_{i,t} \right\}\)</span>. The depth rule is now calculated as:</p>
<div class="arithmatex">\[
    \operatorname{depth} \colon \mathcal{A} \to \mathcal{Y},\quad
    \operatorname{depth}(i, t)=
    \begin{cases}
        1,  &amp; \mathrm{if}\ \tilde{A}_{i,t} &gt; \tilde{B}_{i,t}. \\
        -1, &amp; \mathrm{if}\ \tilde{A}_{i,t} &lt; \tilde{B}_{i,t}\\
    \end{cases}
\]</div>
<p>The depth rule classifies midspread trades only, if the ask size is different from the bid size, as the ratio between the ask and bid size is the sole criterion for inferring the trade's initiator. Due to these restrictive conditions in <span class="arithmatex">\(\mathcal{A}\)</span>, the depth rule can sign only a fraction of all trades and must be best followed by other rules.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="trade-size-rule">Trade Size Rule<a class="headerlink" href="#trade-size-rule" title="Permanent link">&para;</a></h3>
<p>The trade size rule classifies based on a match between the size of the trade <span class="arithmatex">\(\tilde{P}_{i, t}\)</span> and the quoted bid and ask sizes. The rationale is, that the market maker tries to fill the limit order of a customer, which results in the trade being executed at the contemporaneous bid or ask, with a trade size equaling the quoted size (Grauer, Schuster, &amp; Uhrig-Homburg, 2023)<sup id="fnref2:7"><a class="footnote-ref" href="#fn:7">7</a></sup>. The trade size rule is defined on <span class="arithmatex">\(\mathcal{A} = \left\{(i, t) \in \mathbb{N}^2: \tilde{P}_{i,t} = \tilde{A}_{i,t} \neq \tilde{B}_{i,t} \lor \tilde{P}_{i,t} \neq\tilde{A}_{i,t} = \tilde{B}_{i,t} \right\}\)</span> as:</p>
<div class="arithmatex">\[
    \operatorname{tsize} \colon \mathcal{A} \to \mathcal{Y},\quad
    \operatorname{tsize}(i, t)=
    \begin{cases}
        1,  &amp; \mathrm{if}\ \tilde{P}_{i, t} = \tilde{B}_{i, t} \neq \tilde{A}_{i, t}  \\
        -1, &amp; \mathrm{if}\ \tilde{P}_{i, t} = \tilde{A}_{i, t} \neq \tilde{B}_{i, t}. \\
    \end{cases}
\]</div>
<p>When both the size of the ask and bid correspond with the trade size or the trade size does not match the quoted sizes, the result is ambiguous.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;trade_size&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="hybrid-rules">Hybrid Rules<a class="headerlink" href="#hybrid-rules" title="Permanent link">&para;</a></h2>
<p>The basic trade classification rules from <a href="#basic-rules">basic rules</a> can be combined into a hybrid algorithm to enforce universal applicability to all trades and improve the classification performance.</p>
<p>Popular variants include the <a href="#lee-and-ready-algorithm">LR algorithm</a>, the <a href="#ellis-michaely-ohara-rule">EMO rule</a>, and the <a href="#chakrabarty-li-nguyen-van-ness-method">CLNV method</a>. All three algorithms utilize the quote and tick rule to a varying extent. Basic rules are selected based on the proximity of the trade price to the quotes.</p>
<p>As put forth by Grauer et al. (2023)<sup id="fnref3:7"><a class="footnote-ref" href="#fn:7">7</a></sup>, basic or hybrid rules can be combined through stacking. This approach generalizes the aforementioned algorithms, as the applied rule is no longer dependent on the proximity to the quotes, but rather on the classifiability of the trade with the primary rules given by the domains and their ordering.</p>
<h3 id="lee-and-ready-algorithm">Lee and Ready Algorithm<a class="headerlink" href="#lee-and-ready-algorithm" title="Permanent link">&para;</a></h3>
<p>The LR algorithm (Lee &amp; Ready, 1991, p. 745)<sup id="fnref3:6"><a class="footnote-ref" href="#fn:6">6</a></sup> combines the (reverse) tick test and quote rule into a single rule, which is derived from two observations. First, Lee and Ready (1991, pp. 735--745)<sup id="fnref4:6"><a class="footnote-ref" href="#fn:6">6</a></sup> observe a higher precision of the quote rule over the tick rule, which makes it their preferred choice. Second, by the means of a simple model, the authors demonstrate that the tick test can correctly classify on average 85.4 % of all midspread trades if the model's assumptions of constant quotes between trades and the arrival of the market and standing orders following a Poisson process are met. Outside the model's tight assumptions, the expected accuracy of the tick test can be unmet.</p>
<p>In combination, the algorithm primarily signs trades according to the quote rule. Trades at the midpoint of the spread, unclassifiable by the quote rule, are classified by the tick test. Overall:</p>
<div class="arithmatex">\[
    \operatorname{lr} \colon \mathbb{N}^2 \to \mathcal{Y},\quad\operatorname{lr}(i,t)=
    \begin{cases}
        1,                         &amp; \mathrm{if}\ P_{i, t} &gt; M_{i, t} \\
        -1,                        &amp; \mathrm{if}\ P_{i, t} &lt; M_{i, t} \\
        \operatorname{tick}(i, t), &amp; \mathrm{else}.
    \end{cases}
\]</div>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;lr&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="ellis-michaely-ohara-rule">Ellis-Michaely-O'Hara Rule<a class="headerlink" href="#ellis-michaely-ohara-rule" title="Permanent link">&para;</a></h3>
<p>Ellis et al. (2000, pp. 535--536)<sup id="fnref:8"><a class="footnote-ref" href="#fn:8">8</a></sup> examine the performance of the previous algorithms for stocks traded at NASDAQ. By analyzing miss-classified trades with regard to the proximity of the trade to the quotes, they observe, that the quote rule and by extension, the <a href="#lee-and-ready-algorithm">LR algorithm</a>, perform particularly well at classifying trades executed at the bid and the ask price but trail the performance of the tick rule for trades inside or outside the spread (Ellis, Michaely, &amp; O'Hara, 2000, pp. 535--536)<sup id="fnref2:8"><a class="footnote-ref" href="#fn:8">8</a></sup>. The authors combine these observations into a single rule, known as the EMO algorithm.</p>
<p>The EMO algorithm extends the tick rule by classifying trades at the quotes using the quote rule, and all other trades with the tick test. Formally, the classification rule is given by:</p>
<div class="arithmatex">\[
    \operatorname{emo} \colon \mathbb{N}^2 \to \mathcal{Y}, \quad
    \operatorname{emo}(i, t)=
    \begin{cases}
        1,                         &amp; \mathrm{if}\ P_{i, t} = A_{i, t} \\
        -1,                        &amp; \mathrm{if}\ P_{i, t} = B_{i, t} \\
        \operatorname{tick}(i, t), &amp; \mathrm{else}.
    \end{cases}
\]</div>
<p>The EMO algorithm embeds both the quote and tick rule. As trades off the quotes are classified by the tick rule, the algorithm's overall success rate is dominated by the tick test assuming most trades are off-the-quotes.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;emo&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="chakrabarty-li-nguyen-van-ness-method">Chakrabarty-Li-Nguyen-Van-Ness Method<a class="headerlink" href="#chakrabarty-li-nguyen-van-ness-method" title="Permanent link">&para;</a></h3>
<p>Like the previous two algorithms, the CLNV method (Chakrabarty, Li, Nguyen, &amp; Van Ness, 2007, pp. 3811--3812)<sup id="fnref:9"><a class="footnote-ref" href="#fn:9">9</a></sup>  is a hybrid of the quote and tick rule and extends the EMO rule by a differentiated treatment of trades inside the quotes, which are notoriously hard to classify. The authors segment the bid-ask spread into deciles (ten equal-width bins) and classify trades around the midpoint (fourth to seventh decile) by the tick rule and trades close or outside the quotes are categorized by the tick rule.</p>
<div class="arithmatex">\[
    \operatorname{clnv} \colon \mathbb{N}^2 \to \mathcal{Y}, \quad
    \operatorname{clnv}(i, t)=
    \begin{cases}
        1,                         &amp; \mathrm{if}\ P_{i, t} \in \left(\frac{3}{10} B_{i,t} + \frac{7}{10} A_{i,t}, A_{i, t}\right] \\
        -1,                        &amp; \mathrm{if}\ P_{i, t} \in \left[ B_{i,t}, \frac{7}{10} B_{i,t} + \frac{3}{10} A_{i,t}\right) \\
        \operatorname{tick}(i, t), &amp; \mathrm{else}
    \end{cases}
\]</div>
<p>It is derived from a performance comparison of the tick rule (<a href="#ellis-michaely-ohara-rule">EMO rule</a>) against the quote rule (<a href="#lee-and-ready-algorithm">LR algorithm</a>) on stock data, whereby the accuracy was assessed separately for each decile.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;clnv&quot;</span><span class="p">,</span> <span class="s2">&quot;subset&quot;</span><span class="p">)])</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h3 id="stacked-rule">Stacked Rule<a class="headerlink" href="#stacked-rule" title="Permanent link">&para;</a></h3>
<p>The previous algorithms are static concerning the used base rules and their alignment. Combining arbitrary rules into a single algorithm requires a generic procedure. Grauer et al. (2023, p. 15)<sup id="fnref4:7"><a class="footnote-ref" href="#fn:7">7</a></sup> combine basic and hybrid rules through stacking. In this setting, the trade traverses a stack of pre-defined rules until a rule can classify the trade or the end of the stack is reached. The classification is now dependent on the employed rules but also on their relative ordering.</p>
<p>The most basic application is in the <a href="#lee-and-ready-algorithm">LR algorithm</a>, combining <span class="arithmatex">\(\operatorname{quote}\)</span> and <span class="arithmatex">\(\operatorname{tick}\)</span>. For a more complex example consider the hybrid rule consisting of <span class="arithmatex">\(\operatorname{tsize}_{\mathrm{ex}}\)</span>, <span class="arithmatex">\(\operatorname{quote}_{\mathrm{nbbo}}\)</span>, <span class="arithmatex">\(\operatorname{quote}_{\mathrm{ex}}\)</span>, <span class="arithmatex">\(\operatorname{depth}_{\mathrm{nbbo}}\)</span>, <span class="arithmatex">\(\operatorname{depth}_{\mathrm{ex}}\)</span> and  <span class="arithmatex">\(\operatorname{rtick}_{\mathrm{all}}\)</span> popularized in Grauer et al. (2023, p. 15)<sup id="fnref5:7"><a class="footnote-ref" href="#fn:7">7</a></sup>. </p>
<p>In practice, rules may be ordered greedily and new rules added if there are unclassified trades.</p>
<p><strong>Code</strong>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tclf.classical_classifier</span> <span class="kn">import</span> <span class="n">ClassicalClassifier</span>

<span class="n">layers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;trade_size&quot;</span><span class="p">,</span> <span class="s2">&quot;ex&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;quote&quot;</span><span class="p">,</span> <span class="s2">&quot;best&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;quote&quot;</span><span class="p">,</span> <span class="s2">&quot;ex&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="s2">&quot;best&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="s2">&quot;ex&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;rev_tick&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">ClassicalClassifier</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></p>
<h2 id="footnotes">Footnotes<a class="headerlink" href="#footnotes" title="Permanent link">&para;</a></h2>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Lee, C., &amp; Radhakrishna, B. (2000). Inferring investor behavior: Evidence from TORQ data. <em>Journal of Financial Markets</em>, <em>3</em>(2), 83–111. <a href="https://doi.org/10.1016/S1386-4181(00)00002-1">https://doi.org/10.1016/S1386-4181(00)00002-1</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Odders-White, E. R. (2000). On the occurrence and consequences of inaccurate trade classification. <em>Journal of Financial Markets</em>, <em>3</em>(3), 259–286. <a href="https://doi.org/10.1016/S1386-4181(00)00006-9">https://doi.org/10.1016/S1386-4181(00)00006-9</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Harris, L. (1989). A day-end transaction price anomaly. <em>The Journal of Financial and Quantitative Analysis</em>, <em>24</em>(1), 29. <a href="https://doi.org/10.2307/2330746">https://doi.org/10.2307/2330746</a>&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Holthausen, R. W., Leftwich, R. W., &amp; Mayers, D. (1987). The effect of large block transactions on security prices: A cross-sectional analysis. <em>Journal of Financial Economics</em>, <em>19</em>(2), 237–267. <a href="https://doi.org/10.1016/0304-405X(87)90004-3">https://doi.org/10.1016/0304-405X(87)90004-3</a>&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>Hasbrouck, J. (1988). Trades, quotes, inventories, and information. <em>Journal of Financial Economics</em>, <em>22</em>(2), 229–252. <a href="https://doi.org/10.1016/0304-405X(88)90070-0">https://doi.org/10.1016/0304-405X(88)90070-0</a>&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Lee, C., &amp; Ready, M. J. (1991). Inferring trade direction from intraday data. <em>The Journal of Finance</em>, <em>46</em>(2), 733–746. <a href="https://doi.org/10.1111/j.1540-6261.1991.tb02683.x">https://doi.org/10.1111/j.1540-6261.1991.tb02683.x</a>&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:6" title="Jump back to footnote 6 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:6" title="Jump back to footnote 6 in the text">&#8617;</a><a class="footnote-backref" href="#fnref4:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>Grauer, C., Schuster, P., &amp; Uhrig-Homburg, M. (2023). <em>Option trade classification</em>. <a href="https://doi.org/10.2139/ssrn.4098475">https://doi.org/10.2139/ssrn.4098475</a>&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 7 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:7" title="Jump back to footnote 7 in the text">&#8617;</a><a class="footnote-backref" href="#fnref3:7" title="Jump back to footnote 7 in the text">&#8617;</a><a class="footnote-backref" href="#fnref4:7" title="Jump back to footnote 7 in the text">&#8617;</a><a class="footnote-backref" href="#fnref5:7" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:8">
<p>Ellis, K., Michaely, R., &amp; O’Hara, M. (2000). The accuracy of trade classification rules: Evidence from nasdaq. <em>The Journal of Financial and Quantitative Analysis</em>, <em>35</em>(4), 529–551. <a href="https://doi.org/10.2307/2676254">https://doi.org/10.2307/2676254</a>&#160;<a class="footnote-backref" href="#fnref:8" title="Jump back to footnote 8 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:8" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:9">
<p>Chakrabarty, B., Li, B., Nguyen, V., &amp; Van Ness, R. A. (2007). Trade classification algorithms for electronic communications network trades. <em>Journal of Banking   &amp; Finance</em>, <em>31</em>(12), 3806–3821. <a href="https://doi.org/10.1016/j.jbankfin.2007.03.003">https://doi.org/10.1016/j.jbankfin.2007.03.003</a>&#160;<a class="footnote-backref" href="#fnref:9" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../reference/" class="md-footer__link md-footer__link--next" aria-label="Next: API reference" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API reference
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/karelze/tclf" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/in/markus-bilz/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "navigation.tabs", "navigation.instant.progress", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/mermaid@8.4.6/dist/mermaid.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
    
  </body>
</html>